plugins {
    id "java"
}

group 'ch.unibas.gruppe6'
def gitversion = 'git describe --tags --long'.execute().text.trim().split("-").toList();
def gitsha = gitversion.pop(); // get sha
def commits = gitversion.pop(); // get commits since tag
def ver = gitversion.join("-").substring(1); // get tag minus first character
version ver + "+" + commits + "." + gitsha


repositories {
    mavenCentral()
}

dependencies {
    // https://mvnrepository.com/artifact/com.google.guava/guava
    compile group: 'com.google.guava', name: 'guava', version: '25.0-jre'
    compile group: 'com.google.code.gson', name:'gson', version: '2.8.3'
}

jar {
    from {
        configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } // a) Adding dependencies to jar
    }
    manifest {
        attributes 'Main-Class': 'ch.scbirs.timetablegen.Main' // b) Set main class
    }
}
